(this["webpackJsonpgdevelop-ide"]=this["webpackJsonpgdevelop-ide"]||[]).push([[3],{1249:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return O}));var r=n(6),o=n(5),i=n(10),a=n(11),s=n(17),c=n(2310),u=n(2311),l=n(2312),d=n(465),p=n(365),f=n.n(p),b=n(874),h=n(762),j=n(2313),g=n(25),v=n(8),x=e.gd,m=0,w=function(e,t,n){var r=e.getGameResolutionWidth(),o=e.getGameResolutionHeight(),i=window.screenX+window.innerWidth/2-r/2,a=window.screenY+window.innerHeight/2-o/2,s=n||"GDevelopPreview"+m++;return{previewWindow:window.open(t,s,"width=".concat(r,",height=").concat(o,",left=").concat(i,",top=").concat(a)),targetId:s}},O=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).canDoNetworkPreview=function(){return!1},e.canDoHotReload=function(){return!1},e.state={previewLinkDialog:null,error:null},e._prepareExporter=function(){return Object(d.a)("preview").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=Object(h.a)(),o=Object(b.a)()+r,i=new l.a({filesContent:n,bucketBaseUrl:Object(b.a)(),prefix:r}),a=f()(new x.AbstractFileSystemJS,i),s=new x.Exporter(a,t);return s.setCodeOutputDirectory(o),{exporter:s,outputDir:o,browserS3FileSystem:i}}))},e.launchPreview=function(t){var n=t.project,r=t.layout,o=t.externalLayout;return e.setState({error:null}),e.getPreviewDebuggerServer().startServer().catch((function(e){console.error("Unable to start the Debugger Server for the preview:",e)})).then((function(){return e._prepareExporter()})).then((function(i){var a=i.exporter,s=i.outputDir,c=i.browserS3FileSystem,u=new x.PreviewExportOptions(n,s);u.setLayoutName(r.getName()),u.setIsDevelopmentEnvironment(g.b.isDev()),o&&u.setExternalLayoutName(o.getName()),u.useWindowMessageDebuggerClient();var l=e.getPreviewDebuggerServer().getExistingDebuggerIds(),d=l.length?l[l.length-1]:null,p=t.hotReload&&null!==d;return u.setNonRuntimeScriptsCacheBurst(Date.now()),u.setFullLoadingScreen(t.fullLoadingScreen),a.exportProjectForPixiPreview(u),u.delete(),a.delete(),c.uploadPendingObjects().then((function(){var t=s+"/index.html",r=w(n,t,p?Object(j.b)(d):null),o=r.previewWindow,i=r.targetId;o?Object(j.c)({previewWindow:o,targetId:i}):e.setState({previewLinkDialog:{project:n,url:t}})}))})).catch((function(t){e.setState({error:t})}))},e}return Object(o.a)(n,[{key:"getPreviewDebuggerServer",value:function(){return j.a}},{key:"render",value:function(){var e=this,t=this.state,n=t.previewLinkDialog,r=t.error;return r?Object(v.jsx)(u.a,{error:r,onClose:function(){return e.setState({error:null})}}):n?Object(v.jsx)(c.a,{url:n.url,project:n.project,onPreviewWindowOpened:function(e){var t=e.previewWindow,n=e.targetId;Object(j.c)({previewWindow:t,targetId:n})},onClose:function(){return e.setState({previewLinkDialog:null})}}):null}}]),n}(s.Component)}).call(this,n(18))},2310:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(6),o=n(5),i=n(10),a=n(11),s=n(9),c=n(17),u=n(311),l=(n(62),n(303)),d=n(304),p=n(1249),f=n(8),b=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._makeOnOpen=function(t){return function(){var t=Object(p.b)(e.props.project,e.props.url,null),n=t.previewWindow,r=t.targetId;e.props.onPreviewWindowOpened({previewWindow:n,targetId:r}),e.props.onClose()}},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return this.props.url?Object(f.jsx)(s.I18n,{children:function(t){var n=t.i18n;return Object(f.jsxs)(u.c,{title:Object(f.jsx)(s.Trans,{id:"Preview"}),actions:[Object(f.jsx)(u.a,{label:Object(f.jsx)(s.Trans,{id:"Launch the preview"}),primary:!0,onClick:e._makeOnOpen(n)},"launch-preview")],onRequestClose:e.props.onClose,onApply:e._makeOnOpen(n),open:!0,children:[Object(f.jsx)(l.c,{children:Object(f.jsx)(l.a,{noMargin:!0,children:Object(f.jsx)(d.a,{children:Object(f.jsx)(s.Trans,{id:"Your preview is ready! Click on the button to launch the preview."})})})}),Object(f.jsx)(l.c,{children:Object(f.jsx)(l.a,{noMargin:!0,children:Object(f.jsx)(d.a,{children:Object(f.jsx)(s.Trans,{id:"To skip this dialog and <0>directly open the preview next time</0>, please allow popups to be opened for this website in your browser.",components:[Object(f.jsx)("b",{})]})})})})]})}}):null}}]),n}(c.Component)},2311:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(6),o=n(5),i=n(10),a=n(11),s=n(9),c=n(17),u=n(311),l=n(306),d=n(303),p=n(304),f=n(8),b=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.onClose;return Object(f.jsx)(s.I18n,{children:function(e){e.i18n;return Object(f.jsxs)(u.c,{title:Object(f.jsx)(s.Trans,{id:"Could not launch the preview"}),actions:[Object(f.jsx)(l.a,{label:Object(f.jsx)(s.Trans,{id:"Close"}),onClick:n},"close")],onRequestClose:n,open:!0,children:[Object(f.jsx)(d.c,{children:Object(f.jsx)(d.a,{noMargin:!0,children:Object(f.jsx)(p.a,{children:"NetworkingError"===t.code?Object(f.jsx)(s.Trans,{id:"The preview could not be launched because you're offline."}):Object(f.jsx)(s.Trans,{id:"The preview could not be launched because an error happened: {0}.",values:{0:t.message}})})})}),Object(f.jsx)(d.c,{children:Object(f.jsx)(d.a,{noMargin:!0,children:Object(f.jsx)(p.a,{children:Object(f.jsx)(s.Trans,{id:"Make sure you're online, have a proper internet connection and try again. If you download and use GDevelop desktop application, you can also run previews without any internet connection."})})})})]})}})}}]),n}(c.Component)},2312:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(5),o=n(6),i=n(457),a=n.n(i),s=n(874),c=e.gd,u=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:")},l=Object(r.a)((function e(t){var n=this,r=t.filesContent,i=t.prefix,l=t.bucketBaseUrl;Object(o.a)(this,e),this._pendingUploadObjects=[],this._allCopiedExternalUrls=new Set,this.uploadPendingObjects=function(){return Promise.all(n._pendingUploadObjects.map(s.b)).then((function(e){console.log("Uploaded all objects:",e),n._pendingUploadObjects=[]}),(function(e){throw console.error("Can't upload all objects:",e),e}))},this.mkDir=function(e){},this.dirExists=function(e){return!0},this.clearDir=function(e){},this.getTempDir=function(){return"/virtual-unused-tmp-dir"},this.fileNameFrom=function(e){return u(e)?e:a.a.basename(e)},this.dirNameFrom=function(e){return u(e)?"":a.a.dirname(e)},this.makeAbsolute=function(e,t){return u(e)?e:(n.isAbsolute(t)||(t=a.a.resolve(t)),a.a.resolve(t,a.a.normalize(e)))},this.makeRelative=function(e,t){return u(e)?e:a.a.relative(t,a.a.normalize(e))},this.isAbsolute=function(e){return!!u(e)||(0===e.length||(e.length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},this.copyFile=function(e,t){return u(e)?(n._allCopiedExternalUrls.add(e),!0):(console.warn("Copy not done from",e,"to",t),!0)},this.writeToFile=function(e,t){var r=e.replace(n.bucketBaseUrl,""),o=a.a.extname(e);return n._pendingUploadObjects.push({Key:r,Body:t,ContentType:{".js":"text/javascript",".html":"text/html"}[o]}),!0},this.readFile=function(e){return n._indexedFilesContent[e]?n._indexedFilesContent[e].text:(console.error("Unknown file ".concat(e,", returning an empty string")),"")},this.readDir=function(e,t){t=t.toUpperCase();var r=new c.VectorString;return n._allCopiedExternalUrls.forEach((function(e){var n=e.toUpperCase();n.indexOf(t)===n.length-t.length&&r.push_back(e)})),r},this.fileExists=function(e){return u(e),!0},this.prefix=i,this.bucketBaseUrl=l,this._indexedFilesContent={},r.forEach((function(e){n._indexedFilesContent[e.filePath]=e}))}))}).call(this,n(18))},2313:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return g}));var r=n(2),o=n(0),i=n.n(o),a="stopped",s=[],c=0,u={},l=function(){return Object.keys(u).map((function(e){return Number(e)}))},d=function(e){for(var t in u){var n=Number(t);if(u[n].previewWindow===e)return n}return null},p=null,f=function(){null===p&&(p=setInterval((function(){var e=function(e){var t=Number(e);u[t].previewWindow.closed&&(console.info("A preview window was closed, with debugger id:",t),delete u[t],s.forEach((function(e){return(0,e.onConnectionClosed)({id:t,debuggerIds:l()})})),Object.keys(u).length||(clearInterval(p),p=null))};for(var t in u)e(t)}),1e3))},b="https://game-previews.gdevelop.io",h={startServer:function(){var e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("started"!==a){e.next=2;break}return e.abrupt("return");case 2:a="started",window.addEventListener("message",(function(e){if(e.origin===b){var t=d(e.source);if(null!==t)try{var n=JSON.parse(e.data);s.forEach((function(e){return(0,e.onHandleParsedMessage)({id:t,parsedMessage:n})}))}catch(r){console.error("Error while parsing messages coming from a preview:",r)}}})),f(),s.forEach((function(e){return(0,e.onServerStateChanged)()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendMessage:function(e,t){var n=u[e].previewWindow;if(n)try{n.postMessage(t,b)}catch(r){console.error("Unable to send a message to the preview window:",r)}},getServerState:function(){return a},getExistingDebuggerIds:l,registerCallbacks:function(e){return s.push(e),function(){var t=s.indexOf(e);-1!==t&&s.splice(t,1)}}},j=function(e){var t=e.previewWindow,n=e.targetId,r=c++,o=d(t);null!==o&&delete u[o],u[r]={previewWindow:t,targetId:n},f(),s.forEach((function(e){return(0,e.onConnectionOpened)({id:r,debuggerIds:l()})}))},g=function(e){if(null==e)return null;var t=u[e];return t?t.targetId:null}},2314:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(3),o=n(9),i=(n(17),n(365)),a=n.n(i),s=n(383),c=n(875),u=n(465),l=n(497),d=n(466),p=n(698),f=n(8),b=e.gd,h={name:"browser-online-cordova",onlineBuildType:"cordova-build",limitedBuilds:!0,packageNameWarningType:"mobile",getInitialExportState:function(){return{targets:["androidApk"],keystore:"new",signingDialogOpen:!1}},canLaunchBuild:function(e,t,n){return t||""===n},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(f.jsx)(p.a,Object(r.a)({},e))},renderLaunchButtonLabel:function(){return Object(f.jsx)(o.Trans,{id:"Packaging for Android"})},prepareExporter:function(e){return Object(u.a)("cordova").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new l.a({textFiles:n}),o=a()(new b.AbstractFileSystemJS,r);return{exporter:new b.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new b.MapStringBoolean;return a.set("exportForCordova",!0),n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(d.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(d.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},launchUpload:function(e,t){return Object(s.g)().then((function(n){return Object(c.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r,o){var i=t.getAuthorizationHeader,a=t.firebaseUser;return a?Object(s.a)(i,a.uid,n,e.targets,e.keystore,r,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(18))},2315:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(3),o=n(9),i=(n(17),n(365)),a=n.n(i),s=n(383),c=n(875),u=n(465),l=n(497),d=n(466),p=n(699),f=n(8),b=e.gd,h={name:"browser-online-electron",onlineBuildType:"electron-build",limitedBuilds:!0,packageNameWarningType:"desktop",getInitialExportState:function(){return{targets:["winExe"]}},canLaunchBuild:function(e,t,n){return!!e.targets.length&&(t||""===n)},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(f.jsx)(p.a,Object(r.a)({},e))},renderLaunchButtonLabel:function(){return Object(f.jsx)(o.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.a)("electron").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new l.a({textFiles:n}),o=a()(new b.AbstractFileSystemJS,r);return{exporter:new b.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new b.MapStringBoolean;return a.set("exportForElectron",!0),n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(d.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(d.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},launchUpload:function(e,t){return Object(s.g)().then((function(n){return Object(c.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r,o){var i=t.getAuthorizationHeader,a=t.firebaseUser;return a?Object(s.b)(i,a.uid,n,e.targets,r,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(18))},2316:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(9),o=(n(17),n(365)),i=n.n(o),a=n(383),s=n(875),c=n(465),u=n(497),l=n(466),d=n(703),p=n(8),f=e.gd,b={name:"browser-online-web",onlineBuildType:"web-build",getInitialExportState:function(){return null},canLaunchBuild:function(e,t,n){return t||""===n||"done"===n},isNavigationDisabled:function(e,t){return!t&&!["","done"].includes(e)},renderHeader:function(){return Object(p.jsx)(d.a,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Generate link"})},renderCustomStepsProgress:function(e){var t=e.build,n=e.project,r=e.onSaveProject,o=e.errored,i=e.exportStep;return Object(p.jsx)(d.b,{build:t,project:n,onSaveProject:r,errored:o,exportStep:i})},prepareExporter:function(e){return Object(c.a)("web").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new u.a({textFiles:n}),o=i()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new f.MapStringBoolean;return n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(l.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(l.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress,sizeLimit:25e7})},launchUpload:function(e,t){return Object(a.g)().then((function(n){return Object(s.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r,o){var i=t.getAuthorizationHeader,s=t.firebaseUser;return s?Object(a.c)(i,s.uid,n,r,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(18))},2317:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(9),o=(n(17),n(365)),i=n.n(o),a=n(465),s=n(497),c=n(466),u=n(313),l=n(593),d=n(702),p=n(8),f=e.gd,b={name:"browser-html5",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(p.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Export as a HTML5 game"})},prepareExporter:function(e){return Object(a.a)("web").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new s.a({textFiles:n}),o=i()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new f.MapStringBoolean;return n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(c.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(c.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(p.jsx)(d.a,{renderGameButton:function(){return Object(p.jsx)(l.a,{blob:t,children:function(e){return Object(p.jsx)(u.a,{fullWidth:!0,primary:!0,onClick:function(){return Object(l.b)(e,"game.zip")},label:Object(p.jsx)(r.Trans,{id:"Download the exported game"})})}})}})}}}).call(this,n(18))},2318:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(9),o=(n(17),n(365)),i=n.n(o),a=n(465),s=n(497),c=n(466),u=n(313),l=n(593),d=n(694),p=n(8),f=e.gd,b={name:"browser-cordova",packageNameWarningType:"mobile",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(p.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(a.a)("cordova").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new s.a({textFiles:n}),o=i()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new f.MapStringBoolean;return a.set("exportForCordova",!0),n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(c.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(c.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(p.jsx)(d.a,{renderGameButton:function(){return Object(p.jsx)(l.a,{blob:t,children:function(e){return Object(p.jsx)(u.a,{fullWidth:!0,primary:!0,onClick:function(){return Object(l.b)(e,"game.zip")},label:Object(p.jsx)(r.Trans,{id:"Download the exported game"})})}})}})}}}).call(this,n(18))},2319:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(9),o=(n(17),n(365)),i=n.n(o),a=n(465),s=n(497),c=n(466),u=n(313),l=n(593),d=n(695),p=n(8),f=e.gd,b={name:"browser-electron",packageNameWarningType:"desktop",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(p.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(a.a)("electron").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new s.a({textFiles:n}),o=i()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new f.MapStringBoolean;return a.set("exportForElectron",!0),n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(c.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(c.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(p.jsx)(d.a,{renderGameButton:function(){return Object(p.jsx)(l.a,{blob:t,children:function(e){return Object(p.jsx)(u.a,{fullWidth:!0,primary:!0,onClick:function(){return Object(l.b)(e,"game.zip")},label:Object(p.jsx)(r.Trans,{id:"Download the exported game"})})}})}})}}}).call(this,n(18))},2320:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(9),o=(n(17),n(365)),i=n.n(o),a=n(465),s=n(497),c=n(466),u=n(313),l=n(593),d=n(697),p=n(8),f=e.gd,b={name:"browser-facebook-instant-games",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(p.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(a.a)("facebook-instant-games").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new s.a({textFiles:n}),o=i()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,i=e.project,a=new f.MapStringBoolean;return a.set("exportForFacebookInstantGames",!0),n.exportWholePixiProject(i,r,a),a.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(c.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(c.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(p.jsx)(d.a,{renderGameButton:function(){return Object(p.jsx)(l.a,{blob:t,children:function(e){return Object(p.jsx)(u.a,{primary:!0,onClick:function(){return Object(l.b)(e,"fb-instant-game.zip")},label:Object(p.jsx)(r.Trans,{id:"Download the Instant Game archive"})})}})}})}}}).call(this,n(18))},2321:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(1242),o=(n(592),n(384),e.gd),i=[{name:"AdMob",extensionModule:n(2322),objectsRenderingServiceModules:{}},{name:"AdvancedWindow",extensionModule:n(2323),objectsRenderingServiceModules:{}},{name:"FacebookInstantGames",extensionModule:n(2324),objectsRenderingServiceModules:{}},{name:"DeviceSensors",extensionModule:n(2325),objectsRenderingServiceModules:{}},{name:"DeviceVibration",extensionModule:n(2326),objectsRenderingServiceModules:{}},{name:"DebuggerTools",extensionModule:n(2327),objectsRenderingServiceModules:{}},{name:"Physics2",extensionModule:n(2328),objectsRenderingServiceModules:{}},{name:"ExampleJsExtension",extensionModule:n(2329),objectsRenderingServiceModules:{}},{name:"Tween",extensionModule:n(2330),objectsRenderingServiceModules:{}},{name:"Video",extensionModule:n(2331),objectsRenderingServiceModules:{}},{name:"FileSystem",extensionModule:n(2332),objectsRenderingServiceModules:{}},{name:"Firebase",extensionModule:n(2333),objectsRenderingServiceModules:{}},{name:"Leaderboards",extensionModule:n(2334),objectsRenderingServiceModules:{}},{name:"PlayerAuthentication",extensionModule:n(2335),objectsRenderingServiceModules:{}},{name:"DialogueTree",extensionModule:n(2336),objectsRenderingServiceModules:{}},{name:"BBText",extensionModule:n(2337),objectsRenderingServiceModules:{"pixi-multistyle-text/dist/pixi-multistyle-text.umd":n(2338)}},{name:"TileMap",extensionModule:n(2339),objectsRenderingServiceModules:{"pixi-tilemap/dist/pixi-tilemap.umd":n(2340),"helper/TileMapHelper":n(2343),"pako/dist/pako.min":n(2344)}},{name:"Effects",extensionModule:n(2345),objectsRenderingServiceModules:{}},{name:"P2P",extensionModule:n(2346),objectsRenderingServiceModules:{}},{name:"Lighting",extensionModule:n(2347),objectsRenderingServiceModules:{}},{name:"SpatialSound",extensionModule:n(2348),objectsRenderingServiceModules:{}},{name:"BitmapText",extensionModule:n(2349),objectsRenderingServiceModules:{}},{name:"Screenshot",extensionModule:n(2350),objectsRenderingServiceModules:{}},{name:"TextInput",extensionModule:n(2351),objectsRenderingServiceModules:{}}];function a(e){var t=e.objectsEditorService,n=e.objectsRenderingService,a=e.filterExamples;return{loadAllExtensions:function(e){return Promise.resolve(i.filter((function(e){var t=e.name;return!a||!t.includes("Example")})).map((function(i){var a=i.name,s=i.extensionModule,c=i.objectsRenderingServiceModules;if(t&&s.registerEditorConfigurations&&s.registerEditorConfigurations(t),n&&c)for(var u in c)n.registerModule(u,c[u]);return n&&s.registerInstanceRenderers&&s.registerInstanceRenderers(n),{extensionModulePath:"internal-extension://"+a,result:Object(r.loadExtension)(e,o,o.JsPlatform.get(),s)}})))}}}}).call(this,n(18))},2352:function(e,t,n){"use strict";var r=n(3),o=n(17),i=n.n(o),a=n(904),s=n(8);t.a=i.a.memo((function(e){return Object(s.jsx)(a.a,Object(r.a)(Object(r.a)({},e),{},{children:Object(s.jsx)("path",{d:"M7.71,3.5L1.15,15L4.58,21L11.13,9.5M9.73,15L6.3,21H19.42L22.85,15M22.28,14L15.42,2H8.58L8.57,2L15.43,14H22.28Z"})}))}))},2353:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return N}));var r=n(3),o=n(35),i=n(2),a=n(0),s=n.n(a),c=n(9),u=n(17),l=n(311),d=n(306),p=n(313),f=n(303),b=n(305),h=n(25),j=n(593),g=n(331),v=n(346),x=n(62),m=n(304),w=n(700),O=n(871),F=n(487),y=n(396),S=n(466),P=n(457),k=n.n(P),D=n(96),C=n(8),R=e.gd,E="game.json",T=k.a.posix||k.a,M=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r,o,i,a,c,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r=t.onAddBlobFile,o=t.onProgress,i={erroredResources:[]},a=function(e){var t=e.getResourcesManager();return t.getAllResourceNames().toJSArray().map((function(e){var n,r=t.getResource(e),o=r.getFile();return(n=o).startsWith("http://")||n.startsWith("https://")||n.startsWith("ftp://")||n.startsWith("blob:")||n.startsWith("data:")?Object(F.b)(o)?{resource:r,url:o,filename:Object(y.g)(o)}:null:(i.erroredResources.push({resourceName:r.getName(),error:new Error("Unsupported relative file when downloading a copy.")}),null)})).filter(Boolean)},c=a(n),e.next=6,Object(w.b)({urlContainers:c,onProgress:function(e,t){o(e,2*t)}});case 6:return u=e.sent,l=new Set([E]),u.forEach((function(e){var t=e.item,n=e.error,o=e.blob,a=t.resource,s=t.filename;if(!n&&o){var c=T.extname(s),u=T.basename(s,c),d="assets/"+a.getKind(),p=Object(D.a)(u,(function(e){return l.has(T.join(d,e+c))})),f=T.join(d,p+c);l.add(f),a.setFile(f),r({blob:o,filePath:f})}else i.erroredResources.push({resourceName:a.getName(),error:n||new Error("Unknown error during download.")})})),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function N(e){var t=e.project,n=e.onDone,a=u.useState(null),w=Object(o.a)(a,2),F=w[0],y=w[1],P=Object(O.a)({onDoProcess:u.useCallback((function(e,t){return M(Object(r.a)(Object(r.a)({},e),{},{onProgress:t}))}),[])}),k=P.ensureProcessIsDone,D=P.renderProcessDialog;return u.useEffect((function(){return Object(i.a)(s.a.mark((function e(){var n,r,o,i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(null),n=R.ProjectHelper.createNewGDJSProject(),e.prev=2,r=new R.SerializerElement,t.serializeTo(r),n.unserializeFrom(r),r.delete(),o=[],i=[],e.next=11,k({project:n,onAddBlobFile:function(e){o.push(e)}});case 11:return i.push({text:JSON.stringify(Object(v.b)(n)),filePath:E}),e.next=14,Object(S.a)({textFiles:i,blobFiles:o,basePath:"/",onProgress:function(e,t){}});case 14:a=e.sent,y(a),e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(2),Object(x.a)({message:"Unable to save your project because of an internal error.",rawError:e.t0,errorId:"download-file-save-as-dialog-error"}),e.abrupt("return");case 22:return e.prev=22,n.delete(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[2,18,22,25]])})))(),function(){return y(null)}}),[t,k]),Object(C.jsxs)(l.c,{title:Object(C.jsx)(c.Trans,{id:"Download a copy"}),actions:[Object(C.jsx)(d.a,{label:Object(C.jsx)(c.Trans,{id:"Download GDevelop desktop version"}),primary:!1,onClick:function(){return h.b.openExternalURL("http://gdevelop.io")}},"download"),Object(C.jsx)(d.a,{label:Object(C.jsx)(c.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],onRequestClose:n,open:!0,maxWidth:"sm",children:[Object(C.jsxs)(b.a,{noMargin:!0,children:[Object(C.jsx)(m.a,{children:Object(C.jsx)(c.Trans,{id:"You can download the file of your game to continue working on it using the full GDevelop version:"})}),Object(C.jsx)(f.c,{noMargin:!0,expand:!0,justifyContent:"center",children:F?Object(C.jsx)(j.a,{blob:F,children:function(e){return Object(C.jsx)(p.a,{primary:!0,onClick:function(){return Object(j.b)(e,"gdevelop-game.zip")},label:Object(C.jsx)(c.Trans,{id:"Download the compressed game and resources"})})}}):Object(C.jsx)(g.a,{})})]}),D()]})}}).call(this,n(18))},2501:function(e,t,n){"use strict";var r=n(35),o=n(9),i=n(17),a=n(311),s=n(306),c=n(303),u=n(3),l=n(313),d=n(319),p=n(8),f={container:{position:"relative",display:"flex",alignItems:"baseline",width:"100%"},button:{marginLeft:10},textField:{flex:1}},b=function(e){return Object(p.jsxs)("div",{style:Object(u.a)({},f.container),children:[Object(p.jsx)(d.b,{style:f.textField,floatingLabelText:e.floatingLabelText,floatingLabelFixed:!0,type:"text",translatableHintText:{id:"Choose a file or folder"},value:e.value?e.value.name:"",onChange:function(){}}),Object(p.jsx)(l.a,{label:Object(p.jsx)(o.Trans,{id:"Choose..."}),primary:!0,style:f.button,onClick:e.onOpenPicker})]})},h=n(378),j=n(323);t.a=function(e){var t=i.useState(null),n=Object(r.a)(t,2),u=n[0],l=n[1],f=i.useState(""),g=Object(r.a)(f,2),v=g[0],x=g[1],m=i.useState(!1),w=Object(r.a)(m,2),O=w[0],F=w[1],y=i.useState(null),S=Object(r.a)(y,2),P=S[0],k=S[1],D=i.useState(null),C=Object(r.a)(D,2),R=C[0],E=C[1],T=i.useState(!1),M=Object(r.a)(T,2),N=M[0],A=M[1],I=function(){if(!O&&u)return"FOLDER"!==u.type||!!v},L=function(){I()&&u&&(k(null),F(!0),e.onSave({selectedFileOrFolder:u,newFileName:v}).catch((function(e){k(e),F(!1)})))},U=function(){return!O};return N?null:Object(p.jsx)(a.c,{title:Object(p.jsx)(o.Trans,{id:"Save on Google Drive"}),actions:[Object(p.jsx)(s.a,{label:Object(p.jsx)(o.Trans,{id:"Cancel"}),primary:!1,disabled:!U(),onClick:e.onCancel},"cancel"),Object(p.jsx)(h.a,{isLoading:O,children:Object(p.jsx)(a.a,{label:Object(p.jsx)(o.Trans,{id:"Save"}),primary:!0,disabled:!I(),onClick:L})},"save")],cannotBeDismissed:O,onRequestClose:function(){U()&&e.onCancel()},onApply:L,open:!0,maxWidth:"sm",children:Object(p.jsxs)(c.a,{noMargin:!0,children:[Object(p.jsx)(c.c,{children:Object(p.jsx)(b,{floatingLabelText:Object(p.jsx)(o.Trans,{id:"Google Drive folder or existing file to overwrite"}),value:u,onOpenPicker:function(){A(!0),E(null),e.onShowFilePicker({selectFolderEnabled:!0,showUploadView:!1}).then((function(e){l(e),A(!1)})).catch((function(e){E(e),A(!1)}))}})}),Object(p.jsx)(c.c,{children:u&&"FOLDER"===u.type?Object(p.jsx)(d.b,{floatingLabelText:Object(p.jsx)(o.Trans,{id:"New file name"}),floatingLabelFixed:!0,type:"text",translatableHintText:{id:"YourGame.json"},value:v,onChange:function(e,t){return x(t)},fullWidth:!0}):null}),P&&Object(p.jsx)(c.c,{children:Object(p.jsx)(j.a,{kind:"error",children:"There was an error when saving your game. Verify that you have the rights on the folder or file that you selected and try again."})}),R&&Object(p.jsx)(c.c,{children:Object(p.jsx)(j.a,{kind:"error",children:"There was an error when selecting a file or folder from Google Drive. Try again later or verify that you are properly connected to Google Drive."})})]})})}},299:function(e,t,n){"use strict";n.r(t),n.d(t,"create",(function(){return Te}));var r,o,i=n(3),a=n(17),s=n(903),c=n(25),u=n(1260),l=(n(69),n(170),n(20)),d=n(2),p=n(35),f=n(0),b=n.n(f),h=n(9),j=n(686),g=n(881),v=n(457),x=n.n(v),m=n(303),w=n(305),O=n(313),F=n(332),y=n(471),S=n(42),P=n.n(S),k=n(323),D=n(1239),C=n(379),R=n(8),E=function(e){var t=e.options,n=e.onChooseResources,r=e.createNewResource;return Object(R.jsx)(g.a,{onChoose:function(e){var t=e.url,o=r();o.setFile(t);var i=Object(C.h)(t)?Object(C.a)(t):x.a.basename(t);o.setName(i),o.setOrigin("gdevelop-asset-store",t),n([o])},resourceKind:t.resourceKind})},T=function(e){var t=e.options,n=e.onChooseResources,r=e.createNewResource,o=a.useState(""),i=Object(p.a)(o,2),s=i[0],c=i[1],u=a.useState(null),l=Object(p.a)(u,2),f=l[0],j=l[1],g=a.useState([]),v=Object(p.a)(g,2),S=v[0],D=v[1],C=!!S.filter(Boolean).length,E=Object(y.a)(function(){var e=Object(d.a)(b.a.mark((function e(n){var r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.multiSelection?n.split("\n").filter(Boolean):[n],j(null),D([]),e.prev=3,e.next=6,Promise.all(r.map(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get(t,{timeout:1e3,validateStatus:function(e){return!0}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:o=e.sent,D(o.map((function(e){return!(e.status>=200&&e.status<400)}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),j(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),500);return a.useEffect((function(){E(s)}),[s,E]),Object(R.jsxs)(w.a,{noMargin:!0,expand:!0,children:[Object(R.jsx)(m.c,{noMargin:!0,children:Object(R.jsx)(w.d,{renderButton:function(e){return Object(R.jsx)(O.a,{onClick:function(){var e=t.multiSelection?s.split("\n").filter(Boolean):[s];n(e.map((function(e){var t=r();return t.setFile(e),t.setName(x.a.basename(e)),t.setOrigin("url",e),t})))},primary:!0,label:Object(R.jsx)(h.Trans,{id:"Choose"}),style:e,disabled:!!f||C})},renderTextField:function(){return Object(R.jsx)(F.a,{floatingLabelText:t.multiSelection?Object(R.jsx)(h.Trans,{id:"Resource(s) URL(s) (one per line)"}):Object(R.jsx)(h.Trans,{id:"Resource URL"}),value:s,onChange:c,multiline:t.multiSelection,rows:1,rowsMax:5,fullWidth:!0,errorText:f?Object(R.jsx)(h.Trans,{id:"There was an error verifying the URL(s). Please check they are correct."}):C?Object(R.jsx)(h.Trans,{id:"Unable to verify URLs {0} . Please check they are correct.",values:{0:S.map((function(e,t){return e?"#"+(t+1):null})).filter(Boolean).join(", ")}}):null})}})}),Object(R.jsx)(k.a,{kind:"warning",children:Object(R.jsx)(h.Trans,{id:"The URLs must be public and stay accessible while you work on this project - they won't be stored inside the project file. When exporting a game, the resources pointed by these URLs will be downloaded and stored inside the game."})})]})},M=[].concat(Object(l.a)(j.a.map((function(e){var t=e.kind,n=e.createNewResource;return{name:"resource-store-".concat(t),displayName:{id:"Choose from asset store"},displayTab:"standalone",kind:t,renderComponent:function(e){return Object(R.jsx)(E,{createNewResource:n,onChooseResources:e.onChooseResources,options:e.options},"resource-store-".concat(t))}}}))),Object(l.a)(j.a.map((function(e){var t=e.kind,n=e.createNewResource;return{name:"upload-".concat(t),displayName:{id:"File(s) from your device"},displayTab:"import",kind:t,renderComponent:function(e){return Object(R.jsx)(D.a,{createNewResource:n,onChooseResources:e.onChooseResources,options:e.options,fileMetadata:e.fileMetadata,getStorageProvider:e.getStorageProvider},"url-chooser-".concat(t))}}}))),Object(l.a)(j.a.map((function(e){var t=e.kind,n=e.createNewResource;return{name:"url-chooser-".concat(t),displayName:{id:"Use a public URL"},displayTab:"import-advanced",kind:t,renderComponent:function(e){return Object(R.jsx)(T,{createNewResource:n,onChooseResources:e.onChooseResources,options:e.options},"url-chooser-".concat(t))}}})))),N=n(56),A=[{name:"piskel-app",createDisplayName:{id:"Create with Piskel"},editDisplayName:{id:"Edit with Piskel"},kind:"image",edit:function(){Object(N.p)("piskel"),c.b.showMessageBox("This feature is only supported in the desktop version for now!\nDownload it from GDevelop website.")}},{name:"jfxr-app",createDisplayName:{id:"Create with Jfxr"},editDisplayName:{id:"Edit with Jfxr"},kind:"audio",edit:function(){Object(N.p)("jfxr"),c.b.showMessageBox("This feature is only supported in the desktop version for now!\nDownload it from GDevelop website.")}},{name:"yarn-app",createDisplayName:{id:"Create with Yarn"},editDisplayName:{id:"Edit with Yarn"},kind:"json",edit:function(){Object(N.p)("yarn"),c.b.showMessageBox("This feature is only supported in the desktop version for now!\nDownload it from GDevelop website.")}}],I=n(1249),L=n(2314),U=n(2315),B=n(2316),W=n(2317),G=n(2318),_=n(2319),z=n(2320),J=n(694),H=n(703),V=n(702),K=n(697),Y=n(698),q=n(699),X=n(695),Q=Object(i.a)(Object(i.a)({},H.c),{},{exportPipeline:B.a}),Z=[Object(i.a)(Object(i.a)({},V.c),{},{exportPipeline:W.a}),Object(i.a)(Object(i.a)({},Y.b),{},{exportPipeline:L.a}),Object(i.a)(Object(i.a)({},q.b),{},{exportPipeline:U.a}),Object(i.a)(Object(i.a)({},K.c),{},{exportPipeline:z.a})],$=[Object(i.a)(Object(i.a)({},V.c),{},{exportPipeline:W.a}),Object(i.a)(Object(i.a)({},J.c),{},{exportPipeline:G.a}),Object(i.a)(Object(i.a)({},X.c),{},{exportPipeline:_.a})],ee=n(2321),te=n(592),ne=n(384),re=n(874),oe=n(762),ie=n(659),ae=n.n(ie),se=function(e){var t=e.onWriteFile,n=Object(oe.a)(),r=function(e){return"".concat(n,"/").concat(ae()(e),".js")};return{getIncludeFileFor:function(e){return Object(re.a)()+r(e)},writeFunctionCode:function(e,n){var o=r(e);return t({includeFile:o,content:n}),console.log("Uploading function generated code to ".concat(o,"...")),Object(re.b)({Key:r(e),Body:n,ContentType:"text/javascript"})},writeBehaviorCode:function(e,n){var o=r(e);return t({includeFile:o,content:n}),console.log("Uploading behavior generated code to ".concat(o,"...")),Object(re.b)({Key:r(e),Body:n,ContentType:"text/javascript"})},writeObjectCode:function(e,n){var o=r(e);return t({includeFile:o,content:n}),console.log("Uploading object generated code to ".concat(o,"...")),Object(re.b)({Key:r(e),Body:n,ContentType:"text/javascript"})}}},ce=n(1254),ue=n(682),le=n(495),de=n(876),pe=n(2353),fe=n(2354),be=n.n(fe),he={internalName:"DownloadFile",name:{id:"Download a copy"},renderIcon:function(e){return Object(R.jsx)(be.a,{fontSize:e.size})},hiddenInOpenDialog:!0,createOperations:function(e){var t=e.setDialog,n=e.closeDialog;return{onSaveProjectAs:function(){var e=Object(d.a)(b.a.mark((function e(r,o,i){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.onStartSaving(),e.abrupt("return",new Promise((function(e){t((function(){return Object(R.jsx)(pe.a,{onDone:function(){n(),e({wasSaved:!1,fileMetadata:null})},project:r})}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}}},je=n(538),ge=n(1),ve=n(487),xe=n(1246),me=n(361),we=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r={erroredResources:[]},o=n.getResourcesManager(),o.getAllResourceNames().toJSArray().forEach((function(e){var t=o.getResource(e),n=t.getFile();if(Object(me.i)(n))return Object(ve.b)(n)?void r.erroredResources.push({resourceName:t.getName(),error:new Error("Resources uploaded to GDevelop Cloud are not supported on Google Drive.")}):Object(me.f)(n)?void r.erroredResources.push({resourceName:t.getName(),error:new Error("Resources with Blob URLs are not supported.")}):void 0;r.erroredResources.push({resourceName:t.getName(),error:new Error("Relative files in resources are not supported.")})})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{erroredResources:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=(r={},Object(ge.a)(r,"".concat(je.a.internalName,"=>").concat(je.a.internalName),xe.a),Object(ge.a)(r,"".concat(le.a.internalName,"=>").concat(je.a.internalName),Oe),Object(ge.a)(r,"".concat(de.a.internalName,"=>").concat(je.a.internalName),Oe),Object(ge.a)(r,"".concat(je.a.internalName,"=>").concat(de.a.internalName),we),Object(ge.a)(r,"".concat(le.a.internalName,"=>").concat(de.a.internalName),Oe),Object(ge.a)(r,"".concat(de.a.internalName,"=>").concat(de.a.internalName),Oe),Object(ge.a)(r,"".concat(je.a.internalName,"=>").concat(he.internalName),Oe),Object(ge.a)(r,"".concat(le.a.internalName,"=>").concat(he.internalName),Oe),Object(ge.a)(r,"".concat(de.a.internalName,"=>").concat(he.internalName),Oe),r),ye={moveAllProjectResources:function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.oldStorageProvider,r=t.newStorageProvider,o=Fe["".concat(n.internalName,"=>").concat(r.internalName)]){e.next=4;break}throw new Error("Can't find a ResourceMover for ".concat(n.internalName," to ").concat(r.internalName,"."));case 4:return e.abrupt("return",o(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Se=ye,Pe=n(1248),ke=n(1247),De=function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{erroredResources:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=(o={},Object(ge.a)(o,je.a.internalName,Pe.a),Object(ge.a)(o,de.a.internalName,De),Object(ge.a)(o,le.a.internalName,ke.a),o),Re={fetchAllProjectResources:function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.storageProvider,r=Ce[n.internalName]){e.next=4;break}throw new Error("Can't find a ResourceFetcher for ".concat(n.internalName," - have you registered the storage provider here?"));case 4:return e.abrupt("return",r(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ee=Re,Te=function(e){c.b.setUpContextMenu();var t=c.b.getArguments();return Object(R.jsx)(ce.a,{authentication:e,disableCheckForUpdates:!!t["disable-update-check"],makeEventsFunctionCodeWriter:se,eventsFunctionsExtensionWriter:null,eventsFunctionsExtensionOpener:null,children:function(e){var n=e.i18n;return Object(R.jsx)(ue.a,{appArguments:t,storageProviders:[le.a,je.a,de.a,he],defaultStorageProvider:le.a,children:function(e){var r=e.getStorageProviderOperations,o=e.storageProviders,a=e.initialFileMetadataToOpen,l=e.getStorageProvider;return Object(R.jsx)(s.a,{i18n:n,renderPreviewLauncher:function(e,t){return Object(R.jsx)(I.a,Object(i.a)(Object(i.a)({},e),{},{ref:t}))},initialDialog:t["initial-dialog"],initialGameId:t["game-id"],initialGamesDashboardTab:t["games-dashboard-tab"],initialAssetPackUserFriendlySlug:t["asset-pack"],renderExportDialog:function(e){return Object(R.jsx)(u.a,{project:e.project,onSaveProject:e.onSaveProject,onChangeSubscription:e.onChangeSubscription,onClose:e.onClose,automatedExporters:Z,manualExporters:$,onlineWebExporter:Q,allExportersRequireOnline:!0})},storageProviders:o,resourceMover:Se,resourceFetcher:Ee,getStorageProviderOperations:r,getStorageProvider:l,resourceSources:M,resourceExternalEditors:A,extensionsLoader:Object(ee.a)({objectsEditorService:te.a,objectsRenderingService:ne.a,filterExamples:!c.b.isDev()}),initialFileMetadataToOpen:a})}})}})}},465:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(38),o={preview:["/Runtime/index.html"],web:["/Runtime/index.html"],"cocos2d-js":["/Runtime/Cocos2d/cocos2d-js-v3.10.js","/Runtime/Cocos2d/index.html","/Runtime/Cocos2d/main.js","/Runtime/Cocos2d/project.json"],"facebook-instant-games":["/Runtime/FacebookInstantGames/fbapp-config.json","/Runtime/FacebookInstantGames/index.html"],cordova:["/Runtime/Cordova/www/index.html","/Runtime/Cordova/config.xml","/Runtime/Cordova/package.json"],electron:["/Runtime/index.html","/Runtime/Electron/main.js","/Runtime/Electron/package.json"]},i=function(e){var t="https://resources.gdevelop-app.com/GDJS-".concat(Object(r.b)());return Promise.all(o[e].map((function(e){var n=t+e;return fetch(n).then((function(e){if(!e.ok)throw console.error('Error while downloading "'.concat(n,'"'),e),new Error('Error while downloading "'.concat(n,'" (status: ').concat(e.status,")"));return e.text().then((function(e){return{filePath:n,text:e}}))}))}))).then((function(e){return{gdjsRoot:t,filesContent:e}}))}},466:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f}));var r=n(2),o=n(0),i=n.n(o),a=n(873),s=n(700),c=n(457),u=n.n(c),l=n(555);function d(e,t,n){if(e.length){var r=0;!function o(){t(e[r],(function(){++r>=e.length?n():o()}))}()}else n()}var p=function(){var e=Object(r.a)(i.a.mark((function e(t){var n,r,o,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlFiles,r=t.onProgress,e.next=3,Object(s.b)({urlContainers:n.filter((function(e){return-1===e.url.indexOf(".h")})),onProgress:r});case 3:if(o=e.sent,!(a=o.filter((function(e){return!!e.error||!e.blob}))).length){e.next=8;break}throw c=a.map((function(e){var t=e.error;return t?t.message:"Unknown error during download."})).filter(Boolean).join(",\n"),new Error("Could not download ".concat(a.length," files:\n ").concat(Object(l.a)(c,300)));case 8:return e.abrupt("return",o.map((function(e){var t=e.item;return{blob:e.blob,filePath:t.filePath}})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(r.a)(i.a.mark((function e(t){var n,r,o,s,c,l,p,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.textFiles,r=t.blobFiles,o=t.basePath,s=t.onProgress,c=t.sizeLimit,e.next=3,Object(a.a)();case 3:return l=e.sent,p=0,f=r.length+n.length,e.abrupt("return",new Promise((function(e,t){l.createWriter(new l.BlobWriter("application/zip"),(function(i){d(r,(function(e,t){var n=e.filePath,r=e.blob,a=u.a.relative(o,n);i.add(a,new l.BlobReader(r),(function(){p++,s(p,f),t()}),(function(){}))}),(function(){d(n,(function(e,t){var n=e.filePath,r=e.text,a=u.a.relative(o,n);i.add(a,new l.TextReader(r),(function(){p++,s(p,f),t()}),(function(){}))}),(function(){i.close((function(n){var r=n.size;if(c&&r>c){var o=Math.round(r/1e6);t(new Error("Archive is of size ".concat(o," MB, which is above the limit allowed of ").concat(c/1e6," MB.")))}e(n)}))}))}))}),(function(e){console.error("Error while making zip:",e),t(e)}))})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},497:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(5),o=n(6),i=n(457),a=n.n(i),s=e.gd,c=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:")},u=a.a.posix||a.a,l=Object(r.a)((function e(t){var n=this,r=t.textFiles;Object(o.a)(this,e),this._textFiles={},this._filesToDownload={},this.getAllTextFilesIn=function(e){return Object.keys(n._textFiles).filter((function(t){return 0===t.indexOf(e)})).map((function(e){return{filePath:e,text:n._textFiles[e]}}))},this.getAllUrlFilesIn=function(e){return Object.keys(n._filesToDownload).filter((function(t){return 0===t.indexOf(e)})).map((function(e){return{filePath:e,url:n._filesToDownload[e]}}))},this.mkDir=function(e){return!0},this.dirExists=function(e){return!0},this.clearDir=function(e){return Object.keys(n._textFiles).forEach((function(t){0===t.indexOf(e)&&delete n._textFiles[t]})),!0},this.getTempDir=function(){return"/browser-file-system-tmp-dir"},this.fileNameFrom=function(e){return u.basename(e)},this.dirNameFrom=function(e){return u.dirname(e)},this.makeAbsolute=function(e,t){return c(e)?e:(n.isAbsolute(t)||(t=u.resolve(t)),u.resolve(t,u.normalize(e)))},this.makeRelative=function(e,t){return c(e)?0===e.indexOf(t)?e.substring(t.length):(console.warn("".concat(e," cannot be made relative to ").concat(t,", please double check this behavior is correct.")),e):u.relative(t,u.normalize(e))},this.isAbsolute=function(e){return!!c(e)||e.length>0&&"/"===e.charAt(0)},this.copyFile=function(e,t){return c(e)?c(t)?(console.error("Destination can't be a URL in copyFile (from ".concat(e," to ").concat(t,").")),!1):(n._filesToDownload[u.normalize(t)]=e,!0):n._textFiles[e]?(n._textFiles[u.normalize(t)]=n._textFiles[e],!0):(console.error("File not found in copyFile (from ".concat(e," to ").concat(t,").")),!1)},this.writeToFile=function(e,t){return n._textFiles[u.normalize(e)]=t,!0},this.readFile=function(e){return n._textFiles[e]?n._textFiles[e]:(console.error("Unknown file ".concat(e,", returning an empty string")),"")},this.readDir=function(e,t){t=t.toUpperCase();var r=new s.VectorString;return Object.keys(n._filesToDownload).forEach((function(e){var n=e.toUpperCase();n.indexOf(t)===n.length-t.length&&r.push_back(e)})),r},this.fileExists=function(e){if(c(e))return!0;var t=u.normalize(e);return!!n._textFiles[t]||!!n._filesToDownload[t]},r.forEach((function(e){n._textFiles[e.filePath]=e.text}))}))}).call(this,n(18))},593:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(35),o=n(17),i=function(e){var t=e.blob,n=e.children,i=o.useState(""),a=Object(r.a)(i,2),s=a[0],c=a[1],u=o.useState(null),l=Object(r.a)(u,2),d=l[0],p=l[1];return o.useEffect((function(){t&&t!==d&&(c(URL.createObjectURL(t)),p(t))}),[t,d]),o.useEffect((function(){return function(){s&&URL.revokeObjectURL(s)}}),[s]),n(s)},a=function(e,t){var n=document.body;if(n){var r=document.createElement("a");n.appendChild(r),r.style.display="none",r.href=e,r.download=t,r.click(),n.removeChild(r)}}},874:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n(42),o=n.n(r),i=n(36),a=n(519),s=function(e){return Object(a.e)({uploadType:"preview",key:e.Key,contentType:e.ContentType}).then((function(t){var n=t.signedUrl;return o.a.put(n,e.Body,{headers:{"Content-Type":e.ContentType}})}))},c=function(){return i.f.baseUrl}},875:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(42),o=n.n(r),i=function(e,t,n){return o.a.put(t.signedUrl,e,{headers:{"Content-Type":t.contentType},maxContentLength:1/0,onUploadProgress:function(e){e&&e.total?n(e.loaded,e.total):n(0,0)}}).then((function(){}))}},876:function(e,t,n){"use strict";(function(e){var r=n(2),o=n(3),i=n(0),a=n.n(i),s=(n(17),n(346)),c=n(2352),u=n(2501),l=n(117),d=n(8),p="AIzaSyDJYQmzLCfjXnNImDa1X_cDTWjl2BOrcM4",f=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],b="https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.install",h=!1,j=null,g=function(){return h?Promise.resolve():j||(j=Object(l.a)("https://apis.google.com/js/api:client.js").then((function(){var t=e.gapi;if(!t)throw new Error("No gapi global object found after loading Google Drive API script");return new Promise((function(e,n){t.load("client:auth2:picker",{callback:function(){var n=t.auth2.init({apiKey:p,clientId:"44882707384-3t4tubr3fbht87sbtdp7u5mlo45k5uku.apps.googleusercontent.com",discoveryDocs:f,scope:b});t.client.setApiKey(p);var r=t.client.load("drive","v3");e(Promise.all([n,r]))},onerror:function(){n(new Error("Unable to load auth2 and picker APIs for Google Drive."))}})}))})).then((function(){h=!0,j=null})).catch((function(e){throw console.error("Error while loading Google Drive APIs:",e),j=null,e})))},v=!1,x=function(){return g().then((function(){var t=e.gapi.auth2.getAuthInstance();return v&&t.isSignedIn.get()?t.currentUser.get():(v=!1,t.isSignedIn.listen((function(e){console.info("Authenticated with Google APIs: ",e),v=e})),t.signIn({scope:b}).then((function(e){if(!e.getAuthResponse()||e.getAuthResponse().error)throw console.error("OAuth2 error while sign in:",e.getAuthResponse()?e.getAuthResponse().error:"No AuthResponse"),new Error("Authentication error");return v=!0,e})))}))},m=function(e,t,n){return fetch("https://www.googleapis.com/upload/drive/v3/files/".concat(e),{method:"PATCH",headers:new Headers({Authorization:"Bearer ".concat(t.getAuthResponse().access_token),"Content-Type":"application/json"}),body:n}).then((function(e){if(200!==e.status)throw 401===e.status&&(v=!1),e}))},w=function(t){var n=t.selectFolderEnabled,r=t.showUploadView;return x().then((function(t){var o=e.google;return new Promise((function(e){var i=null,a=(new o.picker.PickerBuilder).addView((new o.picker.DocsView).setIncludeFolders(!0).setSelectFolderEnabled(n)).setOAuthToken(t.getAuthResponse().access_token).setDeveloperKey(p).setAppId("44882707384").setCallback((function(t){if(t[o.picker.Response.ACTION]===o.picker.Action.PICKED){var n=t[o.picker.Response.DOCUMENTS][0],r=n[o.picker.Document.ID],a=n[o.picker.Document.NAME],s=n[o.picker.Document.PARENT_ID];n[o.picker.Document.TYPE]===o.picker.Type.LOCATION||"application/vnd.google-apps.folder"===n[o.picker.Document.MIME_TYPE]?e({id:r,name:a,type:"FOLDER"}):e({id:r,name:a,type:"FILE",parentId:s}),i&&i.dispose()}else t[o.picker.Response.ACTION]===o.picker.Action.CANCEL&&(e(null),i&&i.dispose())}));r&&a.addView((new o.picker.DocsUploadView).setIncludeFolders(!0)),(i=a.build()).setVisible(!0);for(var s=document.getElementsByClassName("picker-dialog"),c=0;c<s.length;++c)s[c].style.zIndex="5000"}))}))};t.a={internalName:"GoogleDrive",name:{id:"Google Drive"},renderIcon:function(e){return Object(d.jsx)(c.a,{fontSize:e.size})},getFileMetadataFromAppArguments:function(e){if(e.state)try{var t=JSON.parse(e.state);if(t.ids&&t.ids[0])return{fileIdentifier:t.ids[0]}}catch(n){console.warn("Error while trying to parse the Google Drive 'ids' in 'state' from the app arguments.")}return null},createOperations:function(t){var n=t.setDialog,i=t.closeDialog;return g().catch((function(){})),{doesInitialOpenRequireUserInteraction:!0,onOpen:function(e){var t=e.fileIdentifier;return x().then((function(e){return fetch("https://www.googleapis.com/drive/v3/files/".concat(t,"?alt=media"),{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(e.getAuthResponse().access_token)})})})).then((function(e){return e.text().then((function(e){return new Promise((function(n,r){try{return n({content:JSON.parse(e)})}catch(o){return r(t+" is a corrupted/malformed file.")}}))}),(function(e){throw console.error("Error while reading the file from Google Drive API: ",e),e}))}),(function(e){throw console.error("Error while fetching the file from Google Drive API: ",e),e}))},onOpenWithPicker:function(){return x().then((function(e){return w({selectFolderEnabled:!1,showUploadView:!0})})).then((function(e){return e?{fileIdentifier:e.id}:null}))},onSaveProject:function(e,t){var n=t.fileIdentifier,r=Object(o.a)(Object(o.a)({},t),{},{lastModifiedDate:Date.now()}),i=Object(s.a)(e);return x().then((function(e){return m(n,e,i)})).then((function(){return{wasSaved:!0,fileMetadata:r}}))},onChooseSaveProjectAsLocation:function(t){t.project,t.fileMetadata;return new Promise((function(t){n((function(){return Object(d.jsx)(u.a,{onShowFilePicker:w,onCancel:function(){i(),t({saveAsLocation:null})},onSave:function(){var n=Object(r.a)(a.a.mark((function n(r){var o,i,s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=r.selectedFileOrFolder,i=r.newFileName,n.next=3,x();case 3:if("FOLDER"!==o.type){n.next=10;break}return n.next=6,a=o.id,c=i,e.gapi.client.drive.files.create({"content-type":"application/json",uploadType:"multipart",name:c,parents:[a],mimeType:"application/json",fields:"id, name, kind, size"}).then((function(e){return e.result.id}));case 6:s=n.sent,t({saveAsLocation:{fileIdentifier:s}}),n.next=11;break;case 10:t({saveAsLocation:{fileIdentifier:o.id}});case 11:case"end":return n.stop()}var a,c}),n)})));return function(e){return n.apply(this,arguments)}}()})}))}))},onSaveProjectAs:function(){var e=Object(r.a)(a.a.mark((function e(t,n,r){var o,c,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("A location was not chosen before saving as.");case 2:if(o=n.fileIdentifier){e.next=5;break}throw new Error("A file was not chosen before saving as.");case 5:return c=Object(s.a)(t),r.onStartSaving(),e.next=9,x();case 9:return u=e.sent,l={fileIdentifier:o},e.next=13,r.onMoveResources({newFileMetadata:l});case 13:return e.next=15,m(o,u,c);case 15:return i(),e.abrupt("return",{wasSaved:!0,fileMetadata:l});case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getOpenErrorMessage:function(e){return h?{id:"Check that you don't have any blocked popup (if so, allow them and retry) and that you have the authorization for reading the file you're trying to access."}:{id:"Google Drive could not be loaded. Check that you are not offline and have a proper internet connection, then try again."}}}}}}).call(this,n(18))}}]);
//# sourceMappingURL=browser-app.72b20067.chunk.js.map